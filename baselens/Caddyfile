baselens.tech {
    # Automatic HTTPS with Let's Encrypt (default behavior)
    # Caddy will automatically obtain and renew certificates

    # Proxy API requests to the backend server
    handle /api/* {
        reverse_proxy server:3001 {
            header_up Host {host}
            header_up X-Real-IP {remote}
            header_up X-Forwarded-For {remote}
            header_up X-Forwarded-Proto {scheme}
        }
    }

    # Serve the frontend application
    handle {
        reverse_proxy web:3000 {
            header_up Host {host}
            header_up X-Real-IP {remote}
            header_up X-Forwarded-For {remote}
            header_up X-Forwarded-Proto {scheme}
        }
    }
}